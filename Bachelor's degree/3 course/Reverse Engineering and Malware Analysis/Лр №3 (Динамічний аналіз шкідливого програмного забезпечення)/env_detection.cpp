#include <windows.h>
#include <intrin.h>

// This C++ function will detect VM Guest OS ↓
bool env_detection() {
    unsigned int cpuInfo[4]{};
    __cpuid((int*)cpuInfo, 1);  // The instruction __cpuid determine which environment is used
    return ((cpuInfo[2] >> 31) & 1) == 1;
}


int main() {
    if (env_detection()) {
        MessageBox(0, L"I'm VM ♣", L"VM Guest OS detected", MB_OK);
        // return 0;
    }
    else {
        MessageBox(0, L"Hello kitty!", L"Host Machine detected", MB_OK);
    }
}
